.items_new
  .items_new_body
    .items_new_header
      = link_to image_tag("logo/logo.png", class: "items_new_header_logo to_index_btn"), root_path
    .items_new_main
      .items_new_form_list
        = form_with(model: @item) do |f|
          .items_new_form.items_new_form_photos
            .items_new_form_style
              %label 出品画像
              %p.items_new_mandatory_fields 必須
            %p 最大10枚までアップロードできます
            .photos_input#photos_input
              #input_photos_field
                -if @item.persisted?
                  = @item.images.each_with_in do |image, num|
                    = img_tag image.src.url, data: { index: num }, withd: "100", height: "100"
                = f.fields_for :images do |image|
                  %label#input_photo_field{data: {index: "#{image.index}"}, accept: ".jpeg jpg .png"}
                    = image.file_field :image, class: "input_photo_file", id: "photo_file_#{image.index}"
                    = image_tag "icon/icon_camera.png", class: "fas fa-camera"
                    %p.photos_input_text クリックしてファイルをアップロード
                    - if @item.persisted?
                      = image.check_box :_destroy, data:{ index: image.index }, class: "hidden_destroy"
                -if @item.persisted?
                  .input_photo_file_group{data: { index: "#{@item.images.count}" }}
                    = file_field_tag :src, name: "item[images_attributes][#{@item.images.count}][image]", class: "input_photo_file_group", required: true
                    .input_photo_remove 削除  
            .items_new_caution.photos_caution 画像がありません
            
          .items_new_form.items_new_form_item
            .items_new_name
              .items_new_form_style
                %label 商品名
                %p.items_new_mandatory_fields 必須
              = f.text_field :name, class: "items_new_form_input items_new_form_name_input", placeholder: "４０文字まで", maxlength: "40", required: true
              .items_new_caution.name_caution 入力してください
            .items_new_detail
              .items_new_form_style
                %label 商品の説明
                %p.items_new_mandatory_fields 必須
              = f.text_area :detail, class: "items_new_form_text_area detail_text_area", 
                placeholder: "商品の説明(1000文字以内)\r\n(色、素材、重さ、定価、注意点...)\r\n例)2010年ごろに１万円で購入したジャケットです。ライトグレーで傷はありません。あわせやすいのでおすすめです。", 
                maxlength: "1000", cols: "40", required: true
              .notice_text
                .input_text_length 0/1000
              .items_new_caution#detail_caution 入力してください
                
          .items_new_form.items_new_form_info
            .items_new_category
              .items_new_form_style
                %label カテゴリー
                %p.items_new_mandatory_fields 必須
              .category_form#category_base
                = f.select :category_id, options_for_select(@categories) ,{ include_blank: "選択してください" }, class: "category_list", required: true
              .items_new_caution#category_caution 選択してください
            .items_new_brand
              .items_new_form_style
                %label ブランド
                %p.items_new_option_fields 任意
              %div
                = f.text_field :brand, class: "items_new_form_input brand_input", placeholder: "例）シャネル"
            .items_new_status
              .items_new_form_style
                %label 商品の状態
                %p.items_new_mandatory_fields 必須
              = f.select :status, Item.localed_statuses, { include_blank: "選択してください" }, class: "status_select", required: true
              .items_new_caution#brand_caution 選択してください
          .items_new_form.items_new_form_post
            配送について
            .items_new_post.items_new_pay_side
              .items_new_form_style
                %label 配送料の負担
                %p.items_new_mandatory_fields 必須
              = f.select :pay_side, Item.localed_pay_sides, { include_blank: "選択してください" }, class: "pay_side_select", required: true
              .items_new_caution.pay_side_caution 選択してください
            .items_new_post.items_new_post_way
              .items_new_form_style
                %label 配送の方法
                %p.items_new_mandatory_fields 必須
              -# = f.select :post_way_id, options_for_select(@post_ways) ,{ include_blank: "選択してください", class: "post_way_setlect" }, required: true
              -# .items_new_caution#post_way_caution 選択してください
            .items_new_post.items_new_post_prefecture
              .items_new_form_style
                %label 発送元の地域
                %p.items_new_mandatory_fields 必須
              = f.collection_select :prefecture_id, Prefecture.all, :id, :name, autofocus: true, class: "items_prefecture_select", include_blank: "選択してください", required: true
              .items_new_caution#prefecture_caution 選択してください
            .items_new_post.items_new_post_date
              .items_new_form_style
                %label 発送までの日数
                %p.items_new_mandatory_fields 必須
              = f.select :post_date, Item.localed_post_dates, { include_blank: "選択してください" }, class: "post_date_select", required: true
              .items_new_caution#post_date_caution 選択してください
          .items_new_form_price
            .rate_show
              %p.price_rate 価格（¥300〜9,999,999)
              %label
                %i.fas.fa-question-circle
                -# = link_to guide_path
            .input_selling_price
              .items_new_form_style.price_items_new_form_style
                %label 販売価格
                %p.items_new_mandatory_fields 必須
                %p{ class: "¥mark" } ¥
                = f.number_field :price, class: "price_input", min: "300", max: "9999999", placeholder: "0", required: true
              .items_new_caution#input_price_caution 入力してください
            .price_display.display_fee
              %div 販売手数料(10%)
              %span.display_value.display_fee_value 
            .price_display.display_profit
              %div 販売利益
              %span.display_value.display_profit_value
          .items_new_form.items_new_form_submit
            .items_new_form_btn.items_new_form_submit_btn
              %button{type: "submit", class: "items_new_btn_submit"} 出品する
            -# .items_new_from_btn.items_new_form_save_btn
            -#   %button.items_new_btn_save 下書きに保存
            .items_new_btn_back
              = link_to "もどる", root_path

          .items_new_form_notice
            %p.notice_text
              禁止されている"行為"および"出品物"を必ずご確認ください。
              偽ブランド品や盗品物などの販売は犯罪であり、法律により処罰される可能性があります。
              また、出品をもちまして加盟店規約に同意したことになります。

    .items_new_footer
      .items_new_privacy_policy.items_new_footer_link プライバシーポリシー
      .items_new_terms_of_service.items_new_footer_link 利用規約
      .items_new_notation.items_new_footer_link 特定商取引に関する表記
      .items_new_footer_logo_to_index 
        = link_to image_tag("logo/logo.png", class: "items_new_footer_logo to_index_btn"), root_path
      .items_new_c_inc @Mercari, Inc
